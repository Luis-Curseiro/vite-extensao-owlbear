(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const y=typeof window.OBR<"u",f=window.OBR||{notification:{async show(t){return console.log("OBR.notification.show fallback:",t),null},async close(t){console.log("OBR.notification.close fallback",t)}}},v=document.querySelectorAll(".tab-button"),I=document.querySelectorAll(".tab-content");v.forEach(t=>{t.addEventListener("click",()=>{v.forEach(e=>e.classList.remove("active")),I.forEach(e=>e.classList.remove("active")),t.classList.add("active"),document.getElementById(t.dataset.tab).classList.add("active")})});const d=document.getElementById("notesArea"),h=document.getElementById("exportNotes"),L=document.getElementById("importNotes");d.value=localStorage.getItem("mestre_notes")||"";d.addEventListener("input",()=>{localStorage.setItem("mestre_notes",d.value)});h.addEventListener("click",()=>{var e;const t=localStorage.getItem("mestre_notes")||"";(e=navigator.clipboard)==null||e.writeText(t).then(()=>{r("Notas copiadas para a Ã¡rea de transferÃªncia","SUCCESS")}).catch(()=>r("NÃ£o foi possÃ­vel copiar as notas","ERROR"))});L.addEventListener("click",async()=>{try{const t=await navigator.clipboard.readText();d.value=t,localStorage.setItem("mestre_notes",t),r("Notas importadas da Ã¡rea de transferÃªncia","SUCCESS")}catch{r("Falha ao importar notas","ERROR")}});const E=document.getElementById("initiativeList"),O=document.getElementById("addInitiative"),B=document.getElementById("clearInitiative"),S=document.getElementById("sortInitiative"),g=document.getElementById("initiativeInput");function p(){return JSON.parse(localStorage.getItem("mestre_initiative")||"[]")}function l(t){localStorage.setItem("mestre_initiative",JSON.stringify(t))}function a(){const t=p();E.innerHTML="",t.forEach((e,o)=>{const s=document.createElement("li"),n=document.createElement("span");n.textContent=e;const i=document.createElement("span"),c=document.createElement("button");c.textContent="â†‘",c.onclick=()=>{o>0&&(t.splice(o,1),t.splice(o-1,0,e),l(t),a())};const u=document.createElement("button");u.textContent="â†“",u.onclick=()=>{o<t.length-1&&(t.splice(o,1),t.splice(o+1,0,e),l(t),a())};const m=document.createElement("button");m.textContent="âœ–",m.onclick=()=>{t.splice(o,1),l(t),a()},i.appendChild(c),i.appendChild(u),i.appendChild(m),s.appendChild(n),s.appendChild(i),E.appendChild(s)})}O.addEventListener("click",()=>{const t=g.value.trim();if(!t)return;const e=p();e.push(t),l(e),g.value="",a()});B.addEventListener("click",()=>{confirm("Limpar toda a lista de iniciativa?")&&(localStorage.removeItem("mestre_initiative"),a())});S.addEventListener("click",()=>{const t=p();t.sort((e,o)=>e.localeCompare(o)),l(t),a()});a();const C=document.querySelectorAll(".dice-row button"),R=document.getElementById("diceResult"),w=document.getElementById("notifyOnRoll");function r(t,e="DEFAULT"){if(y&&f.notification&&typeof f.notification.show=="function")try{f.notification.show(t,e)}catch(o){console.warn("OBR notify failed:",o)}else console.log("NOTIFY:",t,e)}C.forEach(t=>{t.addEventListener("click",()=>{const e=parseInt(t.dataset.dice,10),o=Math.floor(Math.random()*e)+1;R.textContent=`ðŸŽ² Rolou ${t.textContent}: ${o}`,w.checked&&r(`Rolagem ${t.textContent}: ${o}`,"INFO")})});y&&r("Escudo do Mestre aberto","SUCCESS");
